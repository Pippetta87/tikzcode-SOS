\documentclass[../main.tex]{subfiles}

\begin{document}


\pgfplotsset{yticklabel style={text width=3em,align=right},every axis plot post/.append style={black},no marks}

\begin{tikzpicture}
\begin{axis}[name=density,
 y tick label style={
        /pgf/number format/.cd,
            fixed,
            fixed zerofill,
            precision=2,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           sci,
            precision=2,
        /tikz/.cd
    },
  xlabel=Mass,
  ylabel=density]
%\addplot+[smooth] table [y=rho, x=M]{ssm.txt};
%\draw[color=black] plot[smooth,mark=*,mark size=1pt] file {ssm.txt} node [right] {data};
%\addplot gnuplot [raw gnuplot, id=test, mark=none, color=blue]{plot "test2" using ($1):($4) {ssm.txt}  };
\addplot gnuplot [raw gnuplot,id=rhoM,no marks,smooth]{plot 'ssm.txt' using 0:3};
\end{axis}

\begin{axis}[name=temp,at=(density.south),anchor=north,
 y tick label style={
        /pgf/number format/.cd,
            fixed,
            fixed zerofill,
            precision=2,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           sci,
            precision=2,
        /tikz/.cd
    },
  xlabel=Mass,
  ylabel=T]

\addplot gnuplot [raw gnuplot,id=test,no marks,smooth]{plot 'ssm.txt' using 0:2};

\end{axis}


\begin{axis}[name=luminosity,at=(temp.east),anchor=west,
 y tick label style={
        /pgf/number format/.cd,
            fixed,
            fixed zerofill,
            precision=2,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           sci,
            precision=2,
        /tikz/.cd
    },
  xlabel=Mass,
  ylabel=L]

\addplot gnuplot [raw gnuplot,id=test,no marks,smooth]{plot 'ssm.txt' using 0:5};

\end{axis}

\begin{axis}[name=hydrogen,at={($(luminosity.north)+(-2,2)$)},anchor=south,
 y tick label style={
        /pgf/number format/.cd,
            fixed,
            fixed zerofill,
            precision=2,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           sci,
            precision=2,
        /tikz/.cd
    },
  xlabel=Mass,
  ylabel=X]

\addplot gnuplot [raw gnuplot,id=test,no marks,smooth]{plot 'ssm.txt' using 0:6};

\end{axis}

\end{tikzpicture}

\end{document}