\documentclass[../main.tex]{subfiles}

\begin{document}


\pgfplotsset{yticklabel style={text width=3em,align=right},every axis plot post/.append style={black}
}

\tikzset{ every pin/.style={fill=black!10!white,rectangle,rounded corners=3pt,font=\tiny}, small dot/.style={fill=black,circle,scale=0.1} }

%\pgfmathparse{1.1}\pgfmathprintnumber{\pgfmathresult}
%\pgfmathparse{11}\pgfmathprintnumber{\pgfmathresult}
%\pgfmathparse{0.021344211355}\pgfmathprintnumber{\pgfmathresult}
%\pgfkeys{/pgf/fixed point arithmetic}
%\pgfmathparse{0.021344211355}\pgfmathprintnumber{\pgfmathresult}

\pgfkeys{/pgf/fpu=true}
\pgfmathparse{5.670367*10^(-8)}
\edef\sigmaB{\pgfmathresult} %% Wm-2K-4
\pgfmathparse{3.844*10^(26)}
\edef\solarL{\pgfmathresult}%%%
\pgfmathparse{6.96*10^8}
\edef\Sradius{\pgfmathresult}%%%meter
\pgfmathparse{(\solarL/(4*pi*\Sradius^2*\sigmaB))^(1/4)}%

$T_{surf}=$\pgfmathprintnumber{\pgfmathresult}\\

\pgfmathparse{1-0.024}
Massa inizio zona convettiva $\midfrac{M}{\msun{}}=\pgfmathprintnumber{\pgfmathresult}$

\pgfkeys{/pgf/fpu=false}

\clearpage

\begin{tikzpicture}[remember picture,overlay]

%\begingroup
%\pgfplotsset{
%every axis x label/.style={
%    at={(ticklabel* cs:1.05)},
%    yshift = -7.5pt,
%    anchor=west,},
%    every axis y label/.style={at={(current axis.above origin)},
%    anchor=north east,
%    yshift = 1cm}}

\coordinate (coordd) at ([shift={(2.8,-0.5)}]current page.north west);
\begin{axis}[clip=false,name=massdensity, at=(coordd),anchor=north west,
 y tick label style={
        /pgf/number format/.cd,
            fixed,
            precision=1,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           fixed,
            precision=1,
        /tikz/.cd
    },
  xlabel=$\midfrac{M}{\msun{}}$,
  ylabel=$\rho(\si{\gram\per\cubic\cm})$,axis y line*=left,
  extra y ticks={}
  ]
%\addplot+[smooth] table [y=rho, x=M]{ssm.txt};
%\draw[color=black] plot[smooth,mark=*,mark size=1pt] file {ssm.txt} node [right] {data};
%\addplot gnuplot [raw gnuplot, id=test, mark=none, color=blue]{plot "test2" using ($1):($4) {ssm.txt}  };
\addplot gnuplot [raw gnuplot,id=RM,no marks,smooth]{set format x "\%8.7f"; plot 'ssm.txt' using 1:4};
\node[small dot,pin=90:{$\rho_b=\num{1.831e-1}$}] at (axis cs:1-0.024,1.831e-1) {};
\node[small dot,pin=-10:{$\rho_c=\num{1.562e2}$}] at (axis cs:0,1.562e2) {};

%plot 'ssm.txt' u 1:1 smooth bezier}
%\node[black,right] at (axis cs:8,1.5) {$\rho_c$};
%\node[] at ($(coordd)+(3,-3)$) {$a)hgilgiguiytuiuyt$};
\end{axis}

%\begin{axis}[name=densityradius, at=(coordd),anchor=north west,
%y tick label style={
%       /pgf/number format/.cd,
%          fixed,
%          precision=1,
%       /tikz/.cd
%  },
%  x tick label style={
%      /pgf/number format/.cd,
%         fixed,
%          precision=1,
%      /tikz/.cd
%  },
%  axis y line*=right,ylabel=$\rho(\si{\gram\per\cubic\cm})$,xlabel=$\midfrac{R}{\rsun{}}$]
%\addplot gnuplot [raw gnuplot,id=rdens,no marks,smooth,color=grey]{set format x "\%8.7f"; plot 'ssm.txt' using 2:4};
%\end{axis}

%\endgroup


\coordinate (coordt) at ([shift={(-0.2,1.5)}]current page.south east);
\begin{axis}[name=temp,at=(coordt),anchor=south east,
 y tick label style={
        /pgf/number format/.cd,
            sci,
            precision=2,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           fixed,
            precision=3,
        /tikz/.cd
    },
  xlabel=$\midfrac{M}{\msun{}}$,
  ylabel=T,
  compat=newest
  %ylabel shift = 5mm
  ]

\addplot gnuplot [raw gnuplot,id=massT,no marks,smooth]{plot 'ssm.txt' using 1:3};
\node[small dot,pin=-10:{$T_c=\num{1.5843e7}$}] at (axis cs:0,1.5843e7) {};
\node[small dot,pin=120:{$T_{cz}=\num{2.204e6}$}] at (axis cs:0.976,2.204e6) {};
\node[small dot,pin=180:{$\rho_c=\num{5777}$}] at (axis cs:1,5777) {};

\end{axis}

\coordinate (coordl) at ([shift={(2.8,1.5)}]current page.south west);
\begin{axis}[name=luminosity,at=(coordl),anchor=south west,
 y tick label style={
        /pgf/number format/.cd,
            sci,
            precision=4,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           fixed,
            precision=3,
        /tikz/.cd
    },
  xlabel=$\midfrac{M}{\msun{}}$,
  ylabel=$\midfrac{L}{\lsun{}}$,
  %ylabel shift = 10mm
  compat=newest
  ]

\addplot gnuplot [raw gnuplot,id=massL,no marks,smooth]{plot 'ssm.txt' using 1:6};
\node[small dot,pin=-120:{$\lsun{}=\SI{3.844}{\erg\per\second}$}] at (axis cs:1,1) {};

\end{axis}

\coordinate (coordh) at ([shift={(-0.2,-0.5)}]current page.north east);
\begin{axis}[name=hydrogen,at=(coordh),anchor=north east,
 y tick label style={
        /pgf/number format/.cd,
            fixed,
            precision=5,
            /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           fixed,
            precision=6,
            /tikz/.cd
    },
  xlabel=$\midfrac{M}{\msun{}}$,
  ylabel=X]

\addplot gnuplot [raw gnuplot,id=massX,no marks,smooth]{plot 'ssm.txt' using 1:7};
\node[small dot,pin=-90:{$X_{surf}=\num{0.73507}$}] at (axis cs:1,0.73507) {};

\end{axis}

\end{tikzpicture}

\clearpage

\end{document}