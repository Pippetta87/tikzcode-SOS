\documentclass[../main.tex]{subfiles}

\begin{document}

%\pgfplotstabletypeset{pgfplotstable.example1.dat}
%\pgfplotstableread[dec sep={\,},sci]{ssm.txt}
%\loadedtable

\pgfplotsset{yticklabel style={text width=3em,align=right},every axis plot post/.append style={black},no marks}

\begin{tikzpicture}
\begin{axis}[name=density,
 y tick label style={
        /pgf/number format/.cd,
            fixed,
            fixed zerofill,
            precision=3,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           sci,
            precision=3,
        /tikz/.cd
    },
  xlabel=Mass,
  ylabel=density]
%\addplot+[smooth] table [y=rho, x=M]{ssm.txt};
%\draw[color=black] plot[smooth,mark=*,mark size=1pt] file {ssm.txt} node [right] {data};
%\addplot gnuplot [raw gnuplot, id=test, mark=none, color=blue]{plot "test2" using ($1):($4) {ssm.txt}  };
\addplot gnuplot [raw gnuplot,id=test,no marks,smooth]{plot 'ssm.txt' using 0:3};
\end{axis}

\begin{axis}[name=mass,at=(density.south),anchor=north,
 y tick label style={
        /pgf/number format/.cd,
            fixed,
            fixed zerofill,
            precision=3,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           sci,
            precision=3,
        /tikz/.cd
    },
  xlabel=Mass,
  ylabel=density]

\addplot table [y=M, x=R]{ssm.txt};

\end{axis}

\begin{axis}[name=temp,at=(mass.south),anchor=north,
 y tick label style={
        /pgf/number format/.cd,
            fixed,
            fixed zerofill,
            precision=3,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           sci,
            precision=3,
        /tikz/.cd
    },
  xlabel=Mass,
  ylabel=density]

\addplot table [y=T, x=M]{ssm.txt};

\end{axis}

\begin{axis}[name=pressure,at=(temp.south),anchor=north,
 y tick label style={
        /pgf/number format/.cd,
            fixed,
            fixed zerofill,
            precision=3,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           sci,
            precision=3,
        /tikz/.cd
    },
  xlabel=Mass,
  ylabel=density]

\addplot table [y=P, x=M]{ssm.txt};

\end{axis}

\begin{axis}[name=luminosity,at=(pressure.south),anchor=north,
 y tick label style={
        /pgf/number format/.cd,
            fixed,
            fixed zerofill,
            precision=3,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           sci,
            precision=3,
        /tikz/.cd
    },
  xlabel=Mass,
  ylabel=density]

\addplot table [y=L, x=M]{ssm.txt};

\end{axis}

\begin{axis}[name=hydrogen,at=(luminosity.south),anchor=north,
 y tick label style={
        /pgf/number format/.cd,
            fixed,
            fixed zerofill,
            precision=3,
        /tikz/.cd
    },
    x tick label style={
        /pgf/number format/.cd,
           sci,
            precision=3,
        /tikz/.cd
    },
  xlabel=Mass,
  ylabel=density]

\addplot table [y=hydrogen, x=M]{ssm.txt};
\end{axis}

\end{tikzpicture}

\end{document}